# 요구사항 정의서

## 1. 프로젝트 개요
- AI Agent 기반 개인 블로그 플랫폼 백엔드
- 단일 사용자(관리자) 전용 블로그

## 2. 기술 스택
- Java 21 / Spring Boot 4.0.x / Gradle
- MySQL (메인 DB)
- Redis (캐싱 + 방문자 통계 + 데이터 구조 활용)
- AI API: GPT (기본) / Claude (폴백) - 순서 변경 가능
- 파일 저장: 로컬 저장 (추후 S3/R2 전환 가능한 추상화 구조)

---

## 3. 기능 요구사항

### 3.1 카테고리 게시판
- 카테고리별 게시판 분류 (독서, Java, 알고리즘 등)
- 카테고리 CRUD (생성, 수정, 삭제, 조회)
- 카테고리별 게시글 목록 조회

### 3.2 게시글
- 게시글 CRUD (생성, 수정, 삭제, 조회)
- 게시글은 하나의 카테고리에 소속
- 첨부 지원:
  - 이미지 업로드
  - 동영상 (임베드 또는 업로드)
  - 외부 링크 (Notion, GitHub 등)
- 댓글 기능: **보류**

### 3.3 방문자 통계
- 게시글별 조회수(방문자수) 표기
- 블로그 전체 방문자수 (누적)
- 오늘(Today) 방문자수
- Redis 활용하여 실시간 집계

### 3.4 SEO 지원
- 게시글별 메타 태그 (title, description, og 태그)
- 시맨틱 URL (slug 기반)
- sitemap.xml 자동 생성
- robots.txt 제공

### 3.5 AI 에이전트 시스템

#### 3.5.1 피드백/보완 에이전트 (통합)
- **트리거**: 글 작성 중 수동 버튼 ("AI 피드백 요청")
- **동작**: 초안에 대한 피드백 + 내용 보완/개선 제안을 한 번에 제공
- **시점**: 글 최종 완성(발행) 전

#### 3.5.2 추천 에이전트
- **트리거**:
  - 글 발행 시 자동 실행
  - 글 수정 시에는 수동 갱신 버튼으로 실행 (사소한 수정 시 토큰 낭비 방지)
- **동작**: "이 글과 함께 보면 좋은 글" 등 관련 콘텐츠 추천

#### 3.5.3 공통
- AI API 전략: 기본 GPT → 폴백 Claude (순서 설정 가능)
- 확장 가능한 에이전트 구조 (추후 에이전트 추가 용이)

### 3.6 AI 응답 캐싱
- **캐시 키**: 게시글 ID + 게시글 내용 해시
- **동작**:
  - 동일 게시글, 동일 내용이면 캐시된 AI 응답 재사용
  - 게시글 내용 변경(해시 변경) 시 캐시 무효화
- **저장소**: Redis
- **만료 정책**: TTL 기반 캐시 만료 적용

---

## 4. 비기능 요구사항

### 4.1 인증
- Spring Security + application.yml 고정 관리자 계정
- JWT 토큰 기반 API 인증
- 별도 사용자 테이블 불필요

### 4.2 파일 저장소
- 초기: 로컬 파일 시스템 저장
- 스토리지 인터페이스 추상화 (FileStorageService)
- 추후 AWS S3 또는 Cloudflare R2로 전환 가능

### 4.3 API
- REST API 기반

---

## 5. 보류/추후 검토
- 댓글 기능
- 임베딩 유사도 기반 캐싱 (게시글 증가 시 검토)
- 외부 스토리지 전환 (S3/R2)
- 추가 요구사항 (추후 업데이트 예정)
